<!DOCTYPE html>



  


<html class="theme-next muse use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
<meta name="theme-color" content="#222">









<meta http-equiv="Cache-Control" content="no-transform">
<meta http-equiv="Cache-Control" content="no-siteapp">
















  
  
  <link href="/blog/lib/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css">







<link href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2" rel="stylesheet" type="text/css">

<link href="/blog/css/main.css?v=5.1.4" rel="stylesheet" type="text/css">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=5.1.4">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=5.1.4">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=5.1.4" color="#222">





  <meta name="keywords" content="Hexo, NexT">





  <link rel="alternate" href="/blog/atom.xml" title="张鹏的博客" type="application/atom+xml">






<meta name="description" content="1. MyBatis Generator (MBG) 指南 MyBatis Generator (MBG) 用于自动生成 Mybatis 代码。 本文转载自 MyBatis Generator 详解    1. 配置详解 1.1. 文件头 1.2. 根元素 1.3. properties 元素 1.4. classPathEntry 元素 1.5. context 元素 1.5.1. plugin">
<meta property="og:type" content="article">
<meta property="og:title" content="1. MyBatis Generator (MBG) 指南">
<meta property="og:url" content="https://dunwu.github.io/2019/03/06/programming/java/javaweb/standalone/orm/mybatis-generator/index.html">
<meta property="og:site_name" content="张鹏的博客">
<meta property="og:description" content="1. MyBatis Generator (MBG) 指南 MyBatis Generator (MBG) 用于自动生成 Mybatis 代码。 本文转载自 MyBatis Generator 详解    1. 配置详解 1.1. 文件头 1.2. 根元素 1.3. properties 元素 1.4. classPathEntry 元素 1.5. context 元素 1.5.1. plugin">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-03-06T08:43:46.939Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="1. MyBatis Generator (MBG) 指南">
<meta name="twitter:description" content="1. MyBatis Generator (MBG) 指南 MyBatis Generator (MBG) 用于自动生成 Mybatis 代码。 本文转载自 MyBatis Generator 详解    1. 配置详解 1.1. 文件头 1.2. 根元素 1.3. properties 元素 1.4. classPathEntry 元素 1.5. context 元素 1.5.1. plugin">



<script type="text/javascript" id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '5.1.4',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":false,"onmobile":false},
    fancybox: true,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    duoshuo: {
      userId: '0',
      author: '博主'
    },
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>



  <link rel="canonical" href="https://dunwu.github.io/2019/03/06/programming/java/javaweb/standalone/orm/mybatis-generator/">





  <title>1. MyBatis Generator (MBG) 指南 | 张鹏的博客</title>
  








</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta ">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">张鹏的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
      
        <p class="site-subtitle">大道至简，知易行难</p>
      
  </div>

  <div class="site-nav-toggle">
    <button>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu">
      
        
        <li class="menu-item menu-item-home">
          <a href="/blog/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-home"></i> <br>
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/blog/about/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-user"></i> <br>
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/blog/tags/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-tags"></i> <br>
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/blog/categories/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-th"></i> <br>
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/blog/archives/" rel="section">
            
              <i class="menu-item-icon fa fa-fw fa-archive"></i> <br>
            
            归档
          </a>
        </li>
      

      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>
            
            搜索
          </a>
        </li>
      
    </ul>
  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="搜索..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/2019/03/06/programming/java/javaweb/standalone/orm/mybatis-generator/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="张鹏的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">1. MyBatis Generator (MBG) 指南</h1>
        

        <div class="post-meta">
          <span class="post-time">
            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              
              <time title="创建于" itemprop="dateCreated datePublished" datetime="2019-03-06T00:00:00+08:00">
                2019-03-06
              </time>
            

            

            
          </span>

          

          
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="1-MyBatis-Generator-MBG-指南"><a href="#1-MyBatis-Generator-MBG-指南" class="headerlink" title="1. MyBatis Generator (MBG) 指南"></a>1. MyBatis Generator (MBG) 指南</h1><blockquote>
<p>MyBatis Generator (MBG) 用于自动生成 Mybatis 代码。</p>
<p>本文转载自 <a href="https://blog.csdn.net/isea533/article/details/42102297" target="_blank" rel="noopener">MyBatis Generator 详解</a></p>
</blockquote>
<!-- TOC depthFrom:2 depthTo:4 -->
<ul>
<li><a href="#1-配置详解">1. 配置详解</a><ul>
<li><a href="#11-文件头">1.1. 文件头</a></li>
<li><a href="#12-根元素">1.2. 根元素</a></li>
<li><a href="#13-properties-元素">1.3. properties 元素</a></li>
<li><a href="#14-classpathentry-元素">1.4. classPathEntry 元素</a></li>
<li><a href="#15-context-元素">1.5. context 元素</a><ul>
<li><a href="#151-plugin-元素">1.5.1. plugin 元素</a></li>
<li><a href="#152-commentgenerator-元素">1.5.2. commentGenerator 元素</a></li>
<li><a href="#153-jdbcconnection-元素">1.5.3. jdbcConnection 元素</a></li>
<li><a href="#154-javatyperesolver-元素">1.5.4. javaTypeResolver 元素</a></li>
<li><a href="#155-javamodelgenerator-元素">1.5.5. javaModelGenerator 元素</a></li>
</ul>
</li>
<li><a href="#16-sqlmapgenerator-元素">1.6. sqlMapGenerator 元素</a></li>
<li><a href="#17-javaclientgenerator-元素">1.7. javaClientGenerator 元素</a></li>
<li><a href="#18-table-元素">1.8. table 元素</a><ul>
<li><a href="#181-generatedkey-元素">1.8.1. generatedKey 元素</a></li>
<li><a href="#182-columnrenamingrule-元素">1.8.2. columnRenamingRule 元素</a></li>
<li><a href="#183-columnoverride-元素">1.8.3. columnOverride 元素</a></li>
<li><a href="#184-ignorecolumn-元素">1.8.4. ignoreColumn 元素</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#2-mybatis-generator-最佳实践">2. MyBatis Generator 最佳实践</a></li>
<li><a href="#3-引用和引申">3. 引用和引申</a></li>
</ul>
<!-- /TOC -->
<h2 id="1-配置详解"><a href="#1-配置详解" class="headerlink" title="1. 配置详解"></a>1. 配置详解</h2><blockquote>
<p>MBG 支持 xml 格式的配置文件。</p>
</blockquote>
<h3 id="1-1-文件头"><a href="#1-1-文件头" class="headerlink" title="1.1. 文件头"></a>1.1. 文件头</h3><p>配置文件必须包含上面的 <code>DOCTYPE</code>。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-2-根元素"><a href="#1-2-根元素" class="headerlink" title="1.2. 根元素"></a>1.2. 根元素</h3><p><code>&lt;generatorConfiguration&gt;</code> 是 MBG 的根节点，它没有任何属性。</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 具体配置内容 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;generatorConfiguration&gt;</code> 元素包含以下子元素（有严格的顺序）：</p>
<ol>
<li><code>&lt;properties&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;classPathEntry&gt;</code> (0 个或多个)</li>
<li><code>&lt;context&gt;</code> (1 个或多个)</li>
</ol>
<h3 id="1-3-properties-元素"><a href="#1-3-properties-元素" class="headerlink" title="1.3. properties 元素"></a>1.3. properties 元素</h3><p>这个元素用来指定外部的属性元素，不是必须的元素。</p>
<p>元素用于指定一个需要在配置中解析使用的外部属性文件，引入属性文件后，可以在配置中使用 <code>${property}</code> 这种形式的引用，通过这种方式引用属性文件中的属性值。 对于后面需要配置的<strong>jdbc 信息</strong>和 targetProject 属性会很有用。</p>
<p>这个属性可以通过 <code>resource</code> 或者 <code>url</code> 来指定属性文件的位置，这两个属性只能使用其中一个来指定，同时出现会报错。</p>
<ul>
<li><code>resource</code>：指定<strong>classpath</strong>下的属性文件，使用类似 <code>com/myproject/generatorConfig.properties</code> 这样的属性值。</li>
<li><code>url</code>：可以指定文件系统上的特定位置，例如 <code>file://C:/myfolder/generatorConfig.properties</code></li>
</ul>
<h3 id="1-4-classPathEntry-元素"><a href="#1-4-classPathEntry-元素" class="headerlink" title="1.4. classPathEntry 元素"></a>1.4. classPathEntry 元素</h3><p>这个元素可以 0 或多个，不受限制。</p>
<p>最常见的用法是通过这个属性指定驱动的路径，例如：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">classPathEntry</span> <span class="attr">location</span>=<span class="string">"E:\mysql\mysql-connector-java-5.1.29.jar"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，<code>classPathEntry</code> 只在下面这两种情况下才有效：</p>
<ul>
<li>当加载 JDBC 驱动默认数据库时</li>
<li>当加载根类中的 <code>JavaModelGenerator</code> 检查重写的方法时</li>
</ul>
<p>因此，如果你需要加载其他用途的 jar <code>包，classPathEntry</code> 起不到作用，不能这么写，解决的办法就是将你用的 jar 包添加到类路径中，在 Eclipse 等 IDE 中运行的时候，添加 jar 包比较容易。当从命令行执行的时候，需要用 <code>java -cp xx.jar,xx2.jar xxxMainClass</code> 这种方式在-cp 后面指定来使用(注意-jar 会导致-cp 无效)。</p>
<h3 id="1-5-context-元素"><a href="#1-5-context-元素" class="headerlink" title="1.5. context 元素"></a>1.5. context 元素</h3><p>在 MBG 的配置中，至少需要有一个 <code>&lt;context&gt;</code> 元素。</p>
<p><code>&lt;context&gt;</code> 元素用于指定生成一组对象的环境。例如指定要连接的数据库，要生成对象的类型和要处理的数据库中的表。运行 MBG 的时候还可以指定要运行的 <code>&lt;context&gt;</code>。</p>
<p>该元素只有一个<strong>必选属性</strong> <code>id</code>，用来唯一确定一个 <code>&lt;context&gt;</code> 元素，该 <code>id</code> 属性可以在运行 MBG 的使用。</p>
<p>此外还有几个<strong>可选属性</strong>：</p>
<ul>
<li><code>defaultModelType</code> - <strong>这个属性很重要</strong>，这个属性定义了 MBG 如何生成<strong>实体类</strong>。该属性支持以下可选值：<ul>
<li><code>conditional</code> - 这是默认值。这个模型和下面的 hierarchical 类似，除了如果那个单独的类将只包含一个字段，将不会生成一个单独的类。 因此,如果一个表的主键只有一个字段,那么不会为该字段生成单独的实体类,会将该字段合并到基本实体类中。</li>
<li><code>flat</code> - 该模型为每一张表只生成一个实体类。这个实体类包含表中的所有字段。<strong>这种模型最简单，推荐使用。</strong></li>
<li><code>hierarchical</code> - 如果表有主键,那么该模型会产生一个单独的主键实体类,如果表还有 BLOB 字段， 则会为表生成一个包含所有 BLOB 字段的单独的实体类,然后为所有其他的字段生成一个单独的实体类。 MBG 会在所有生成的实体类之间维护一个继承关系。</li>
</ul>
</li>
<li><code>targetRuntime</code> - 此属性用于指定生成的代码的运行时环境。该属性支持以下可选值：<ul>
<li>MyBatis3 - 这是默认值。</li>
<li>MyBatis3Simple</li>
<li>Ibatis2Java2</li>
<li>Ibatis2Java5 一般情况下使用默认值即可，有关这些值的具体作用以及区别请查看中文文档的详细内容。</li>
</ul>
</li>
<li><code>introspectedColumnImpl</code> - 该参数可以指定扩展 <code>org.mybatis.generator.api.IntrospectedColumn</code> 该类的实现类。</li>
</ul>
<p>一般情况下，我们使用如下的配置即可：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"Mysql"</span> <span class="attr">defaultModelType</span>=<span class="string">"flat"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如果你希望不生成和 Example 查询有关的内容，那么可以按照如下进行配置:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"Mysql"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3Simple"</span> <span class="attr">defaultModelType</span>=<span class="string">"flat"</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>使用 MyBatis3Simple 可以避免在后面的 <code>&lt;table&gt;</code> 中逐个进行配置（后面会提到）。</p>
<p>MBG 配置中的其他几个元素，基本上都是 <code>&lt;context&gt;</code> 的子元素，这些子元素（有严格的配置顺序）包括：</p>
<ul>
<li><code>&lt;property&gt;</code> (0 个或多个)</li>
<li><code>&lt;plugin&gt;</code> (0 个或多个)</li>
<li><code>&lt;commentGenerator&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;jdbcConnection&gt;</code> (1 个)</li>
<li><code>&lt;javaTypeResolver&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;javaModelGenerator&gt;</code> (1 个)</li>
<li><code>&lt;sqlMapGenerator&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;javaClientGenerator&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;table&gt;</code> (1 个或多个)</li>
</ul>
<p>其中 <code>&lt;property&gt;</code> 属性比较特殊，后面讲解的时候都会和父元素一起进行讲解。在讲解 <code>&lt;property&gt;</code> 属性前，我们先看看<strong>什么是分隔符？</strong>。</p>
<p>这里通过一个例子说明。假设在 Mysql 数据库中有一个表名为 <code>user info</code>，你没有看错，中间是一个空格，这种情况下如果写出 <code>select * from user info</code> 这样的语句，肯定是要报错的，在 Mysql 中的时候我们一般会写成如下的样子:</p>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> <span class="string">`user info`</span></span><br></pre></td></tr></table></figure>
<p>这里的使用的<strong>反单引号(`)</strong>就是<strong>分隔符</strong>，<strong>分隔符</strong>可以用于<strong>表名</strong>或者<strong>列名</strong>。</p>
<p>下面继续看 <code>&lt;property&gt;</code> 支持的属性：</p>
<ul>
<li><code>autoDelimitKeywords</code></li>
<li><code>beginningDelimiter</code></li>
<li><code>endingDelimiter</code></li>
<li><code>javaFileEncoding</code></li>
<li><code>javaFormatter</code></li>
<li><code>xmlFormatter</code></li>
</ul>
<p>由于这些属性比较重要，这里一一讲解。</p>
<p>首先是 <code>autoDelimitKeywords</code>，当表名或者字段名为 SQL 关键字的时候，可以设置该属性为 true，MBG 会自动给表名或字段名添加<strong>分隔符</strong>。</p>
<p>然后这里继续上面的例子来讲 <code>beginningDelimiter</code> 和 <code>endingDelimiter</code> 属性。</p>
<p>由于 <code>beginningDelimiter</code> 和 <code>endingDelimiter</code> 的默认值为双引号(“)，在 Mysql 中不能这么写，所以还要将这两个默认值改为<strong>反单引号(`)</strong>，配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"beginningDelimiter"</span> <span class="attr">value</span>=<span class="string">"`"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"endingDelimiter"</span> <span class="attr">value</span>=<span class="string">"`"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>属性 <code>javaFileEncoding</code> 设置要使用的 Java 文件的编码，默认使用当前平台的编码，只有当生产的编码需要特殊指定时才需要使用，一般用不到。</p>
<p>最后两个 <code>javaFormatter</code> 和 <code>xmlFormatter</code> 属性<strong>可能会</strong>很有用，如果你想使用模板来定制生成的 java 文件和 xml 文件的样式，你可以通过指定这两个属性的值来实现。</p>
<h4 id="1-5-1-plugin-元素"><a href="#1-5-1-plugin-元素" class="headerlink" title="1.5.1. plugin 元素"></a>1.5.1. plugin 元素</h4><p>该元素可以配置 0 个或者多个，不受限制。</p>
<p><code>&lt;plugin&gt;</code> 元素用来定义一个插件。插件用于扩展或修改通过 MBG 代码生成器生成的代码。</p>
<p>插件将按在配置中配置的顺序执行。</p>
<p>有关插件的详细信息可以参考<a href="http://mbg.cndocs.ml/reference/pluggingIn.html" target="_blank" rel="noopener">开发插件</a>和<a href="http://mbg.cndocs.ml/reference/plugins.html" target="_blank" rel="noopener">提供的插件</a>了解更多。</p>
<h4 id="1-5-2-commentGenerator-元素"><a href="#1-5-2-commentGenerator-元素" class="headerlink" title="1.5.2. commentGenerator 元素"></a>1.5.2. commentGenerator 元素</h4><p>该元素最多可以配置 1 个。</p>
<p>这个元素非常有用，相信很多人都有过这样的需求，就是希望 MBG 生成的代码中可以包含注释信息，具体就是生成表或字段的备注信息。</p>
<p>使用这个元素就能很简单的实现我们想要的功能。这里先介绍该元素，介绍完后会举例如何扩展实现该功能。</p>
<p>该元素有一个可选属性 type,可以指定用户的实现类，该类需要实现 <code>org.mybatis.generator.api.CommentGenerator</code> 接口。而且必有一个默认的构造方法。这个属性接收默认的特殊值 DEFAULT，会使用默认的实现类 <code>org.mybatis.generator.internal.DefaultCommentGenerator</code>。</p>
<p>默认的实现类中提供了两个可选属性，需要通过 <code>&lt;property&gt;</code> 属性进行配置。</p>
<ul>
<li><code>suppressAllComments</code> - 阻止生成注释，默认为 false</li>
<li><code>suppressDate</code> - 阻止生成的注释包含时间戳，默认为 false</li>
</ul>
<p>一般情况下由于 MBG 生成的注释信息没有任何价值，而且有时间戳的情况下每次生成的注释都不一样，使用版本控制的时候每次都会提交，因而一般情况下我们都会屏蔽注释信息，可以如下配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressAllComments"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>接下来我们简单举例实现生成包含表字段注释信息的注释</p>
<p>因为系统提供了一个默认的实现类，所以对我们来说，自己实现一个会很容易，最简单的方法就是复制默认实现类代码到一个新的文件中，修改类名如 <code>MyCommentGenerator</code>，在你自己的实现类中，你可以选择是否继续支持上面的两个属性，你还可以增加对其他属性的支持。</p>
<p>我们通过下面一个方法的修改来了解，其他几个方法请自行修改(写本章的时候我也没有完全实现该类，所以不提供完整源码了):</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Override</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">addFieldComment</span><span class="params">(Field field, IntrospectedTable introspectedTable, IntrospectedColumn introspectedColumn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (introspectedColumn.getRemarks() != <span class="keyword">null</span> &amp;&amp; !introspectedColumn.getRemarks().equals(<span class="string">""</span>)) &#123;</span><br><span class="line">        field.addJavaDocLine(<span class="string">"/**"</span>);</span><br><span class="line">        field.addJavaDocLine(<span class="string">" * "</span> + introspectedColumn.getRemarks());</span><br><span class="line">        addJavadocTag(field, <span class="keyword">false</span>);</span><br><span class="line">        field.addJavaDocLine(<span class="string">" */"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>这个方法是给字段添加注释信息的，其中 <code>IntrospectedColumn</code> 包含了字段的完整信息，通过 getRemarks 方法可以获取字段的注释信息。上面这个方法修改起来还是很容易的。除了字段的注释外还有 <code>Getter</code> 和 <code>Setter</code>，以及类的注释。此外还有生成 XML 的注释，大家可以根据默认的实现进行修改。</p>
<p>完成我们自己的实现类后，我们还需要做如下配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">commentGenerator</span> <span class="attr">type</span>=<span class="string">"com.github.abel533.mybatis.generator.MyCommentGenerator"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-5-3-jdbcConnection-元素"><a href="#1-5-3-jdbcConnection-元素" class="headerlink" title="1.5.3. jdbcConnection 元素"></a>1.5.3. jdbcConnection 元素</h4><p><code>&lt;jdbcConnection&gt;</code> 用于指定数据库连接信息，该元素必选，并且只能有一个。</p>
<p>配置该元素只需要注意如果 JDBC 驱动不在<strong>classpath</strong>下，就需要通过 <code>&lt;classPathEntry&gt;</code> 元素引入 jar 包，这里<strong>推荐</strong>将 jar 包放到<strong>classpath</strong>下。</p>
<p>该元素有两个必选属性:</p>
<ul>
<li><code>driverClass</code> - 访问数据库的 JDBC 驱动程序的完全限定类名</li>
<li><code>connectionURL</code> - 访问数据库的 JDBC 连接 URL</li>
</ul>
<p>该元素还有两个可选属性:</p>
<ul>
<li><code>userId</code> - 访问数据库的用户 ID</li>
<li><code>password</code> - 访问数据库的密码</li>
</ul>
<p>此外该元素还可以接受多个 <code>&lt;property&gt;</code> 子元素，这里配置的 <code>&lt;property&gt;</code> 属性都会添加到 JDBC 驱动的属性中。</p>
<p>这个元素配置起来最容易，这里举个简单例子：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.jdbc.Driver"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">userId</span>=<span class="string">"root"</span></span></span><br><span class="line"><span class="tag">                <span class="attr">password</span>=<span class="string">""</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-5-4-javaTypeResolver-元素"><a href="#1-5-4-javaTypeResolver-元素" class="headerlink" title="1.5.4. javaTypeResolver 元素"></a>1.5.4. javaTypeResolver 元素</h4><p>该元素最多可以配置一个。</p>
<p>这个元素的配置用来指定 JDBC 类型和 Java 类型如何转换。</p>
<p>该元素提供了一个可选的属性 type，和 <code>&lt;commentGenerator&gt;</code> 比较类型，提供了默认的实现 DEFAULT，一般情况下使用默认即可，需要特殊处理的情况可以通过其他元素配置来解决，不建议修改该属性。</p>
<p>该属性还有一个可以配置的 <code>&lt;property&gt;</code> 元素。</p>
<p>可以配置的属性为 forceBigDecimals，该属性可以控制是否强制 DECIMAL 和 NUMERIC 类型的字段转换为 Java 类型的 <code>java.math.BigDecimal</code>，默认值为 false，一般不需要配置。</p>
<p>默认情况下的转换规则为：</p>
<ol>
<li>如果 <code>精度&gt;0</code> 或者 <code>长度&gt;18</code>，就会使用 <code>java.math.BigDecimal</code></li>
<li>如果 <code>精度=0</code> 并且 <code>10&lt;=长度&lt;=18</code>，就会使用 <code>java.lang.Long</code></li>
<li>如果 <code>精度=0</code> 并且 <code>5&lt;=长度&lt;=9</code>，就会使用 <code>java.lang.Integer</code></li>
<li>如果 <code>精度=0</code> 并且 <code>长度&lt;5</code>，就会使用 <code>java.lang.Short</code></li>
<li>如果设置为 <code>true</code>，那么一定会使用 <code>java.math.BigDecimal</code>，配置示例如下：</li>
</ol>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">javaTypeResolver</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"forceBigDecimals"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaTypeResolver</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-5-5-javaModelGenerator-元素"><a href="#1-5-5-javaModelGenerator-元素" class="headerlink" title="1.5.5. javaModelGenerator 元素"></a>1.5.5. javaModelGenerator 元素</h4><p>该元素必须配置一个，并且最多一个。</p>
<p>该元素用来控制生成的实体类，根据 <code>&lt;context&gt;</code> 中配置的 <code>defaultModelType</code>，一个表可能会对应生成多个不同的实体类。一个表对应多个类实际上并不方便，所以前面也推荐使用 <code>flat</code>，这种情况下一个表对应一个实体类。</p>
<p>该元素只有两个属性，都是必选的。</p>
<ul>
<li><code>targetPackage</code> - 生成实体类存放的包名，一般就是放在该包下。实际还会受到其他配置的影响( <code>&lt;table&gt;</code> 中会提到)。</li>
<li><code>targetProject</code> - 指定目标项目路径，可以是绝对路径或相对路径（如 targetProject=”src/main/java”）。</li>
</ul>
<p>该元素支持以下几个 <code>&lt;property&gt;</code> 子元素属性：</p>
<ul>
<li><code>constructorBased</code> - 该属性只对 MyBatis3 有效，如果 true 就会使用构造方法入参，如果 false 就会使用 setter 方式。默认为 false。</li>
<li><code>enableSubPackages</code> - 如果 true，MBG 会根据 <code>catalog</code> 和 <code>schema</code> 来生成子包。如果 false 就会直接用 <code>targetPackage</code> 属性。默认为 false。</li>
<li><code>immutable</code> - 该属性用来配置实体类属性是否可变，如果设置为 true，那么 constructorBased 不管设置成什么，都会使用构造方法入参，并且不会生成 setter 方法。如果为 false，实体类属性就可以改变。默认为 false。</li>
<li><code>rootClass</code> - 设置所有实体类的基类。如果设置，需要使用类的全限定名称。并且如果 MBG 能够加载 rootClass，那么 MBG 不会覆盖和父类中完全匹配的属性。匹配规则：<ul>
<li>属性名完全相同</li>
<li>属性类型相同</li>
<li>属性有 getter 方法</li>
<li>属性有 setter 方法</li>
</ul>
</li>
<li><code>trimStrings</code> - 是否对数据库查询结果进行 trim 操作，如果设置为 true 就会生成类似这样 <code>public void setUsername(String username) {this.username = username == null ? null : username.trim();}</code> 的 setter 方法。默认值为 false。</li>
</ul>
<p>配置示例如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"test.model"</span> <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-6-sqlMapGenerator-元素"><a href="#1-6-sqlMapGenerator-元素" class="headerlink" title="1.6. sqlMapGenerator 元素"></a>1.6. sqlMapGenerator 元素</h3><p>该元素可选，最多配置一个。但是有如下两种必选的特殊情况：</p>
<ul>
<li>如果 <code>targetRuntime</code> 目标是<strong>iBATIS2</strong>，该元素必须配置一个。</li>
<li>如果 <code>targetRuntime</code> 目标是<strong>MyBatis3</strong>，只有当 <code>&lt;javaClientGenerator&gt;</code> 需要 XML 时，该元素必须配置一个。 如果没有配置 <code>&lt;javaClientGenerator&gt;</code> ，则使用以下的规则：<ul>
<li>如果指定了一个 <code>&lt;sqlMapGenerator&gt;</code> ，那么 MBG 将只生成 XML 的 SQL 映射文件和实体类。</li>
<li>如果没有指定 <code>&lt;sqlMapGenerator&gt;</code> ，那么 MBG 将只生成实体类。</li>
</ul>
</li>
<li>该元素只有两个属性（和前面提过的 <code>&lt;javaModelGenerator&gt;</code> 的属性含义一样），都是必选的。</li>
<li><code>targetPackage</code> - 生成实体类存放的包名，一般就是放在该包下。实际还会受到其他配置的影响( <code>&lt;table&gt;</code> 中会提到)。</li>
<li><code>targetProject</code> - 指定目标项目路径，可以是绝对路径或相对路径（如 <code>targetProject=&quot;src/main/resources&quot;</code>）。</li>
<li>该元素支持 <code>&lt;property&gt;</code> 子元素，只有一个可以配置的属性：</li>
<li><code>enableSubPackages</code> - 如果 true，MBG 会根据 <code>catalog</code> 和 <code>schema</code> 来生成子包。如果 false 就会直接用 <code>targetPackage</code> 属性。默认为 false。</li>
</ul>
<p>配置示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"test.xml"</span>  <span class="attr">targetProject</span>=<span class="string">"src\main\resources"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"enableSubPackages"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">sqlMapGenerator</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-7-javaClientGenerator-元素"><a href="#1-7-javaClientGenerator-元素" class="headerlink" title="1.7. javaClientGenerator 元素"></a>1.7. javaClientGenerator 元素</h3><p>该元素可选，最多配置一个。</p>
<p>如果不配置该元素，就不会生成 Mapper 接口。</p>
<p>该元素有 3 个必选属性：</p>
<ul>
<li><code>type</code> - 该属性用于选择一个预定义的客户端代码（可以理解为 Mapper 接口）生成器，用户可以自定义实现，需要继承 <code>org.mybatis.generator.codegen.AbstractJavaClientGenerator</code> 类，必选有一个默认的构造方法。 该属性提供了以下预定的代码生成器，首先根据 <code>&lt;context&gt;</code> 的 <code>targetRuntime</code> 分成三类：<ul>
<li>MyBatis3<ul>
<li><code>ANNOTATEDMAPPER</code> - 基于注解的 Mapper 接口，不会有对应的 XML 映射文件</li>
<li><code>MIXEDMAPPER</code> - XML 和注解的混合形式，(上面这种情况中的)SqlProvider 注解方法会被 XML 替代。</li>
<li><code>XMLMAPPER</code> - 所有的方法都在 XML 中，接口调用依赖 XML 文件。</li>
</ul>
</li>
<li>MyBatis3Simple<ul>
<li><code>ANNOTATEDMAPPER</code> - 基于注解的 Mapper 接口，不会有对应的 XML 映射文件</li>
<li><code>XMLMAPPER</code> - 所有的方法都在 XML 中，接口调用依赖 XML 文件。</li>
</ul>
</li>
<li>Ibatis2Java2 或 Ibatis2Java5<ul>
<li><code>IBATIS</code> - 生成的对象符合 iBATIS 的 DAO 框架（不建议使用）。</li>
<li><code>GENERIC-CI</code> - 生成的对象将只依赖于 SqlMapClient，通过构造方法注入。</li>
<li><code>GENERIC-SI</code> - 生成的对象将只依赖于 SqlMapClient，通过 setter 方法注入。</li>
<li><code>SPRING</code> - 生成的对象符合 Spring 的 DAO 接口</li>
</ul>
</li>
</ul>
</li>
<li><code>targetPackage</code> - 生成实体类存放的包名，一般就是放在该包下。实际还会受到其他配置的影响( <code>&lt;table&gt;</code> 中会提到)。</li>
<li><code>targetProject</code> - 指定目标项目路径，可以是绝对路径或相对路径（如 <code>targetProject=&quot;src/main/java&quot;</code>）。该元素还有一个可选属性：<ul>
<li><code>implementationPackage</code> - 如果指定了该属性，实现类就会生成在这个包中。</li>
<li>该元素支持 <code>&lt;property&gt;</code> 子元素设置的属性：<ul>
<li><code>enableSubPackages</code></li>
<li><code>exampleMethodVisibility</code></li>
<li><code>methodNameCalculator</code></li>
<li><code>rootInterface</code> - 用于指定一个所有生成的接口都继承的父接口。 这个值可以通过 <code>&lt;table&gt;</code> 配置的 <code>rootInterface</code> 属性覆盖。这个属性对于通用 Mapper 来说，可以让生成的所有接口都继承该接口。</li>
<li><code>useLegacyBuilder</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<p>配置示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetPackage</span>=<span class="string">"test.dao"</span></span></span><br><span class="line"><span class="tag">              <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="1-8-table-元素"><a href="#1-8-table-元素" class="headerlink" title="1.8. table 元素"></a>1.8. table 元素</h3><p>该元素至少要配置一个，可以配置多个。</p>
<p>该元素用来配置要通过内省的表。只有配置的才会生成实体类和其他文件。</p>
<p>该元素有一个必选属性：</p>
<ul>
<li><code>tableName</code> - 指定要生成的表名，可以使用 SQL 通配符匹配多个表。</li>
</ul>
<p>例如要生成全部的表，可以按如下配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"%"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>该元素包含多个可选属性：</p>
<ul>
<li><code>schema</code> - 数据库的 <code>schema</code>,可以使用 SQL 通配符匹配。如果设置了该值，生成 SQL 的表名会变成如 <code>schema.tableName</code> 的形式。</li>
<li><code>catalog</code> - 数据库的 <code>catalog</code>，如果设置了该值，生成 SQL 的表名会变成如 catalog.tableName 的形式。</li>
<li><code>alias</code> - 如果指定，这个值会用在生成的 select 查询 SQL 的表的别名和列名上。 列名会被别名为 alias<em>actualColumnName(别名</em>实际列名) 这种模式。</li>
<li><code>domainObjectName</code> - 生成对象的基本名称。如果没有指定，MBG 会自动根据表名来生成名称。</li>
<li><code>enableXXX</code> - XXX 代表多种 SQL 方法，该属性用来指定是否生成对应的 XXX 语句。</li>
<li><code>selectByPrimaryKeyQueryId</code> - DBA 跟踪工具会用到，具体请看详细文档。</li>
<li><code>selectByExampleQueryId</code> - DBA 跟踪工具会用到，具体请看详细文档。</li>
<li><code>modelType</code> - 和 <code>&lt;context&gt;</code> 的 <code>defaultModelType</code> 含义一样，这里可以针对表进行配置，这里的配置会覆盖 <code>&lt;context&gt;</code> 的 <code>defaultModelType</code> 配置。</li>
<li><code>escapeWildcards</code> - 这个属性表示当查询列，是否对 <code>schema</code> 和表名中的 SQL 通配符 (‘_‘ and ‘%’) 进行转义。 对于某些驱动当 <code>schema</code> 或表名中包含 SQL 通配符时（例如，一个表名是 MY_TABLE，有一些驱动需要将下划线进行转义）是必须的。默认值是 false。</li>
<li><code>delimitIdentifiers</code> - 是否给标识符增加<strong>分隔符</strong>。默认 false。当 <code>catalog</code>、<code>schema</code> 或 <code>tableName</code> 中包含空白时，默认为 true。</li>
<li><code>delimitAllColumns</code> - 是否对所有列添加<strong>分隔符</strong>。默认 false。</li>
<li>该元素包含多个可用的 <code>&lt;property&gt;</code> 子元素，可选属性为：</li>
<li><code>constructorBased</code> - 和 <code>&lt;javaModelGenerator&gt;</code> 中的属性含义一样。</li>
<li><code>ignoreQualifiersAtRuntime</code> - 生成的 SQL 中的表名将不会包含 <code>schema</code> 和 <code>catalog</code> 前缀。</li>
<li><code>immutable</code> - 和 <code>&lt;javaModelGenerator&gt;</code> 中的属性含义一样。</li>
<li><code>modelOnly</code> - 此属性用于配置是否为表只生成实体类。如果设置为 true 就不会有 Mapper 接口。如果配置了 <code>&lt;sqlMapGenerator&gt;</code> ，并且 modelOnly 为 true，那么 XML 映射文件中只有实体对象的映射元素( <code>&lt;resultMap&gt;</code> )。如果为 true 还会覆盖属性中的 enableXXX 方法，将不会生成任何 CRUD 方法。</li>
<li><code>rootClass</code> - 和 <code>&lt;javaModelGenerator&gt;</code> 中的属性含义一样。</li>
<li><code>rootInterface</code> - 和 <code>&lt;javaClientGenerator&gt;</code> 中的属性含义一样。</li>
<li><code>runtimeCatalog</code> - 运行时的 <code>catalog</code>，当生成表和运行环境的表的 <code>catalog</code> 不一样的时候可以使用该属性进行配置。</li>
<li><code>runtimeschema</code> - 运行时的 <code>schema</code>，当生成表和运行环境的表的 <code>schema</code> 不一样的时候可以使用该属性进行配置。</li>
<li><code>runtimeTableName</code> - 运行时的 <code>tableName</code>，当生成表和运行环境的表的 <code>tableName</code> 不一样的时候可以使用该属性进行配置。</li>
<li><code>selectAllOrderByClause</code> - 该属性值会追加到 <code>selectAll</code> 方法后的 SQL 中，会直接跟 order by 拼接后添加到 SQL 末尾。</li>
<li><code>useActualColumnNames</code> - 如果设置为 true,那么 MBG 会使用从数据库元数据获取的列名作为生成的实体对象的属性。 如果为 false(默认值)，MGB 将会尝试将返回的名称转换为驼峰形式。 在这两种情况下，可以通过 元素显示指定，在这种情况下将会忽略这个（useActualColumnNames）属性。</li>
<li><code>useColumnIndexes</code> - 如果是 true，MBG 生成 <code>resultMaps</code> 的时候会使用列的索引,而不是结果中列名的顺序。</li>
<li><code>useCompoundPropertyNames</code> - 如果是 true,那么 MBG 生成属性名的时候会将列名和列备注接起来. 这对于那些通过第四代语言自动生成列(例如 - FLD22237),但是备注包含有用信息(例如 - “customer id”)的数据库来说很有用. 在这种情况下,MBG 会生成属性名 FLD2237_CustomerId。</li>
</ul>
<p>除了 <code>&lt;property&gt;</code> 子元素外， <code>&lt;table&gt;</code> 还包含以下子元素：</p>
<ul>
<li><code>&lt;generatedKey&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;columnRenamingRule&gt;</code> (0 个或 1 个)</li>
<li><code>&lt;columnOverride&gt;</code> (0 个或多个)</li>
<li><code>&lt;ignoreColumn&gt;</code> (0 个或多个)</li>
</ul>
<p>下面对这 4 个元素进行详细讲解。</p>
<h4 id="1-8-1-generatedKey-元素"><a href="#1-8-1-generatedKey-元素" class="headerlink" title="1.8.1. generatedKey 元素"></a>1.8.1. generatedKey 元素</h4><p>这个元素最多可以配置一个。</p>
<p>这个元素用来指定自动生成主键的属性（identity 字段或者 sequences 序列）。如果指定这个元素，MBG 在生成 insert 的 SQL 映射文件中插入一个 <code>&lt;selectKey&gt;</code> 元素。 这个元素<strong>非常重要</strong>，这个元素包含下面两个必选属性：</p>
<ul>
<li><code>column</code> - 生成列的列名。</li>
<li><code>sqlStatement</code> - 将返回新值的 SQL 语句。如果这是一个 identity 列，您可以使用其中一个预定义的的特殊值。预定义值如下：<ul>
<li>Cloudscape</li>
<li>DB2</li>
<li>DB2_MF</li>
<li>Derby</li>
<li>HSQLDB</li>
<li>Informix</li>
<li>MySql</li>
<li>SqlServer</li>
<li>SYBASE</li>
<li>JDBC - 这会配置 MBG 使用 MyBatis3 支持的 JDBC 标准的生成 key 来生成代码。 这是一个独立于数据库获取标识列中的值的方法。  重要 - 只有当目标运行为 MyBatis3 时才会产生正确的代码。 如果与 iBATIS2 一起使用目标运行时会产生运行时错误的代码。这个元素还包含两个可选属性：</li>
</ul>
</li>
<li><code>identity</code> - 当设置为 true 时,该列会被标记为 <code>identity</code> 列， 并且 <code>&lt;selectKey&gt;</code> 元素会被插入在 insert 后面。 当设置为 false 时， <code>&lt;selectKey&gt;</code> 会插入到 insert 之前（通常是序列）。<strong>重要</strong> - 即使您 type 属性指定为 post，您仍然需要为 <code>identity</code> 列将该参数设置为 true。 这将标志 MBG 从插入列表中删除该列。默认值是 false。</li>
<li><code>type</code> - <code>type=post and identity=true</code> 的时候生成的 <code>&lt;selectKey&gt;</code> 中的 order=AFTER，当 type=pre 的时候，identity 只能为 false，生成的 <code>&lt;selectKey&gt;</code> 中的 order=BEFORE。可以这么理解，自动增长的列只有插入到数据库后才能得到 ID，所以是 AFTER,使用序列时，只有先获取序列之后，才能插入数据库，所以是 BEFORE。</li>
</ul>
<p>配置示例一</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"user login info"</span> <span class="attr">domainObjectName</span>=<span class="string">"UserLoginInfo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">sqlStatement</span>=<span class="string">"Mysql"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对应的生成的结果</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"test.model.UserLoginInfo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span> <span class="attr">order</span>=<span class="string">"AFTER"</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">        SELECT LAST_INSERT_ID()</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into `user login info` (Id, username, logindate, loginip)</span><br><span class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;username,jdbcType=VARCHAR&#125;, #&#123;logindate,jdbcType=TIMESTAMP&#125;, #&#123;loginip,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>配置示例二</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"user login info"</span> <span class="attr">domainObjectName</span>=<span class="string">"UserLoginInfo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">sqlStatement</span>=<span class="string">"select SEQ_ID.nextval from dual"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>对应的生成结果</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">"insert"</span> <span class="attr">parameterType</span>=<span class="string">"test.model.UserLoginInfo"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">selectKey</span> <span class="attr">keyProperty</span>=<span class="string">"id"</span> <span class="attr">order</span>=<span class="string">"BEFORE"</span> <span class="attr">resultType</span>=<span class="string">"java.lang.Integer"</span>&gt;</span></span><br><span class="line">        select SEQ_ID.nextval from dual</span><br><span class="line">    <span class="tag">&lt;/<span class="name">selectKey</span>&gt;</span></span><br><span class="line">    insert into `user login info` (Id, username, logindate, loginip)</span><br><span class="line">    values (#&#123;id,jdbcType=INTEGER&#125;, #&#123;username,jdbcType=VARCHAR&#125;, #&#123;logindate,jdbcType=TIMESTAMP&#125;,#&#123;loginip,jdbcType=VARCHAR&#125;)</span><br><span class="line"><span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-8-2-columnRenamingRule-元素"><a href="#1-8-2-columnRenamingRule-元素" class="headerlink" title="1.8.2. columnRenamingRule 元素"></a>1.8.2. columnRenamingRule 元素</h4><p>该元素最多可以配置一个，使用该元素可以在生成列之前，对列进行重命名。这对那些存在同一前缀的字段想在生成属性名时去除前缀的表非常有用。例如假设一个表包含以下的列：</p>
<ul>
<li>CUST_BUSINESS_NAME</li>
<li>CUST_STREET_ADDRESS</li>
<li>CUST_CITY</li>
<li>CUST_STATE</li>
</ul>
<p>生成的所有属性名中如果都包含 CUST 的前缀可能会让人不爽。这些前缀可以通过如下方式定义重命名规则:</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">columnRenamingRule</span> <span class="attr">searchString</span>=<span class="string">"^CUST_"</span> <span class="attr">replaceString</span>=<span class="string">""</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意，在内部，MBG 使用 <code>java.util.regex.Matcher.replaceAll</code> 方法实现这个功能。 请参阅有关该方法的文档和在 Java 中使用正则表达式的例子。</p>
<p>当 <code>&lt;columnOverride&gt;</code> 匹配一列时，这个元素（ <code>&lt;columnRenamingRule&gt;</code> ）会被忽略。 <code>&lt;columnOverride&gt;</code> 优先于重命名的规则。</p>
<p>该元素有一个必选属性：</p>
<ul>
<li><code>searchString</code> - 定义将被替换的字符串的正则表达式。该元素有一个可选属性：<ul>
<li><code>replaceString</code> - 这是一个用来替换搜索字符串列每一个匹配项的字符串。如果没有指定，就会使用空字符串。</li>
</ul>
</li>
</ul>
<p>关于 <code>&lt;table&gt;</code> 的 <code>&lt;property&gt;</code> 属性 <code>useActualColumnNames</code> 对此的影响可以查看完整文档。</p>
<h4 id="1-8-3-columnOverride-元素"><a href="#1-8-3-columnOverride-元素" class="headerlink" title="1.8.3. columnOverride 元素"></a>1.8.3. columnOverride 元素</h4><p>该元素可选，可以配置多个。</p>
<p>该元素从将某些属性默认计算的值更改为指定的值。</p>
<p>该元素有一个必选属性:</p>
<ul>
<li><code>column</code> - 要重写的列名。该元素有多个可选属性：<ul>
<li><code>property</code> - 要使用的 Java 属性的名称。如果没有指定，MBG 会根据列名生成。 例如，如果一个表的一列名为 STRT_DTE，MBG 会根据 <code>&lt;table&gt;</code> 的 useActualColumnNames 属性生成 STRT_DTE 或 strtDte。</li>
<li><code>javaType</code> - 该列属性值为完全限定的 Java 类型。如果需要，这可以覆盖由 JavaTypeResolver 计算出的类型。 对某些数据库来说，这是必要的用来处理<strong>“奇怪的”</strong>数据库类型（例如 MySql 的 unsigned bigint 类型需要映射为 java.lang.Object)。</li>
<li><code>jdbcType</code> - 该列的 JDBC 类型(INTEGER, DECIMAL, NUMERIC, VARCHAR 等等)。 如果需要，这可以覆盖由 JavaTypeResolver 计算出的类型。 对某些数据库来说，这是必要的用来处理怪异的 JDBC 驱动 (例如 DB2 的 LONGVARCHAR 类型需要为 iBATIS 映射为 VARCHAR)。</li>
<li><code>typeHandler</code> - 用户定义的需要用来处理这列的类型处理器。它必须是一个继承 iBATIS 的 TypeHandler 类或 TypeHandlerCallback 接口（该接口很容易继承）的全限定的类名。如果没有指定或者是空白，iBATIS 会用默认的类型处理器来处理类型。<strong>重要</strong> - MBG 不会校验这个类型处理器是否存在或者可用。 MGB 只是简单的将这个值插入到生成的 SQL 映射的配置文件中。</li>
<li><code>delimitedColumnName</code> - 指定是否应在生成的 SQL 的列名称上增加<strong>分隔符</strong>。 如果列的名称中包含空格，MGB 会自动添加<strong>分隔符</strong>， 所以这个重写只有当列名需要强制为一个合适的名字或者列名是数据库中的保留字时是必要的。</li>
</ul>
</li>
</ul>
<p>配置示例：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">schema</span>=<span class="string">"DB2ADMIN"</span> <span class="attr">tableName</span>=<span class="string">"ALLTYPES"</span> &gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">columnOverride</span> <span class="attr">column</span>=<span class="string">"LONG_VARCHAR_FIELD"</span> <span class="attr">javaType</span>=<span class="string">"java.lang.String"</span> <span class="attr">jdbcType</span>=<span class="string">"VARCHAR"</span> /&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="1-8-4-ignoreColumn-元素"><a href="#1-8-4-ignoreColumn-元素" class="headerlink" title="1.8.4. ignoreColumn 元素"></a>1.8.4. ignoreColumn 元素</h4><p>该元素可选，可以配置多个。</p>
<p>该元素可以用来屏蔽不需要生成的列。</p>
<p>该元素有一个必选属性：</p>
<ul>
<li><code>column</code> - 要忽略的列名。该元素还有一个可选属性：<ul>
<li><code>delimitedColumnName</code> - 匹配列名的时候是否区分大小写。如果为 true 则区分。默认值为 false，不区分大小写。</li>
</ul>
</li>
</ul>
<h2 id="2-MyBatis-Generator-最佳实践"><a href="#2-MyBatis-Generator-最佳实践" class="headerlink" title="2. MyBatis Generator 最佳实践"></a>2. MyBatis Generator 最佳实践</h2><p>本节内容针对 MyBatis3，使用 iBATIS 的不一定适用。</p>
<p>以下根据个人经验（对此有意见的可以留言）对一些配置看法列出如下几点：</p>
<p>关于实体类的 modelType，建议使用 defaultModelType=”flat”，只有一个对象的情况下管理毕竟方便，使用也简单。<br>关于注释 <code>&lt;commentGenerator&gt;</code> ，不管你是否要重写自己的注释生成器，有一点不能忘记，那就是注释中一定要保留@mbggenerated,MBG 通过该字符串来判断代码是否为代码生成器生成的代码，有该标记的的代码在重新生成的时候会被删除，不会重复。不会在 XML 中出现重复元素。</p>
<p>使用 MBG 生成的代码时，建议尽可能不要去修改自动生成的代码，而且要生成带有@mbggenerated，这样才不会在每次重新生成代码的时候需要手动修改好多内容。</p>
<p>仍然是注释相关，在 <code>&lt;commentGenerator&gt;</code> 中，建议一定要保留 <code>suppressAllComments</code> 属性(使用默认值 false)，一定要取消(设为 true)时间戳 <code>suppressDate</code>，避免重复提交 SVN。</p>
<p><code>&lt;jdbcConnection&gt;</code> 建议将 JDBC 驱动放到项目的<strong>classpath</strong>下，而不是使用 <code>&lt;classPathEntry&gt;</code> 来引入 jar 包，主要考虑到所有开发人员的统一性。</p>
<p>当数据库字段使用 CHAR 时，建议在 <code>&lt;javaModelGenerator&gt;</code> 中设置 <code>&lt;property name=&quot;trimStrings&quot; value=&quot;true&quot; /&gt;</code> ，可以自动去掉不必要的空格。</p>
<p>在 <code>&lt;javaClientGenerator&gt;</code> 中，建议设置 <code>type=&quot;XMLMAPPER&quot;</code>,不建议使用注解或混合模式，比较代码和 SQL 完全分离易于维护。</p>
<p>建议尽可能在 <code>&lt;table&gt;</code> 中配置 <code>&lt;generatedKey&gt;</code> ，避免手工操作，以便于 MBG 重复执行代码生成。</p>
<p>如果有其他有价值的经验，会继续补充。</p>
<p>综合以上信息，这里给出一个 Mysql 的简单配置：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version="1.0" encoding="UTF-8"?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE generatorConfiguration</span></span><br><span class="line"><span class="meta">        PUBLIC "-//mybatis.org//DTD MyBatis Generator Configuration 1.0//EN"</span></span><br><span class="line"><span class="meta">        "http://mybatis.org/dtd/mybatis-generator-config_1_0.dtd"&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">generatorConfiguration</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context</span> <span class="attr">id</span>=<span class="string">"MysqlContext"</span> <span class="attr">targetRuntime</span>=<span class="string">"MyBatis3"</span> <span class="attr">defaultModelType</span>=<span class="string">"flat"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"beginningDelimiter"</span> <span class="attr">value</span>=<span class="string">"`"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"endingDelimiter"</span> <span class="attr">value</span>=<span class="string">"`"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suppressDate"</span> <span class="attr">value</span>=<span class="string">"true"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">commentGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">jdbcConnection</span> <span class="attr">driverClass</span>=<span class="string">"com.mysql.jdbc.Driver"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">connectionURL</span>=<span class="string">"jdbc:mysql://localhost:3306/test"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">userId</span>=<span class="string">"root"</span></span></span><br><span class="line"><span class="tag">                        <span class="attr">password</span>=<span class="string">""</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">jdbcConnection</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaModelGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"test.model"</span> <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"trimStrings"</span> <span class="attr">value</span>=<span class="string">"true"</span> /&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">javaModelGenerator</span>&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">sqlMapGenerator</span> <span class="attr">targetPackage</span>=<span class="string">"test.xml"</span>  <span class="attr">targetProject</span>=<span class="string">"src\main\resources"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">javaClientGenerator</span> <span class="attr">type</span>=<span class="string">"XMLMAPPER"</span> <span class="attr">targetPackage</span>=<span class="string">"test.dao"</span>  <span class="attr">targetProject</span>=<span class="string">"src\main\java"</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">        <span class="tag">&lt;<span class="name">table</span> <span class="attr">tableName</span>=<span class="string">"%"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">generatedKey</span> <span class="attr">column</span>=<span class="string">"id"</span> <span class="attr">sqlStatement</span>=<span class="string">"Mysql"</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">generatorConfiguration</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><code>&lt;table&gt;</code> 这里用的通配符匹配全部的表，另外所有表都有自动增长的 id 字段。如果不是所有表的配置都一样，可以做针对性的配置。</p>
<h2 id="3-引用和引申"><a href="#3-引用和引申" class="headerlink" title="3. 引用和引申"></a>3. 引用和引申</h2><ul>
<li><a href="https://github.com/mybatis/generator" target="_blank" rel="noopener">Github</a></li>
<li><a href="http://www.mybatis.org/generator/" target="_blank" rel="noopener">官方文档</a></li>
<li><a href="https://blog.csdn.net/isea533/article/details/42102297" target="_blank" rel="noopener">MyBatis Generator 详解</a></li>
</ul>

      
    </div>
    
    
    

    

    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2019/03/06/os/linux/ops/service/kafka/" rel="next" title="Kafka 安装部署">
                <i class="fa fa-chevron-left"></i> Kafka 安装部署
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2019/03/06/programming/java/javastack/javatool/build/maven/maven-settings/" rel="prev" title="Maven 之 settings.xml 详解">
                Maven 之 settings.xml 详解 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>



    <div class="post-spread">
      
    </div>
  </div>


          </div>
          


          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <section class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/blog/images/avatar.gif" alt="Zhang Peng">
            
              <p class="site-author-name" itemprop="name">Zhang Peng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          <nav class="site-state motion-element">

            
              <div class="site-state-item site-state-posts">
              
                <a href="/blog/archives/">
              
                  <span class="site-state-item-count">381</span>
                  <span class="site-state-item-name">日志</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-categories">
                <a href="/blog/categories/index.html">
                  <span class="site-state-item-count">14</span>
                  <span class="site-state-item-name">分类</span>
                </a>
              </div>
            

            
              
              
              <div class="site-state-item site-state-tags">
                <a href="/blog/tags/index.html">
                  <span class="site-state-item-count">76</span>
                  <span class="site-state-item-name">标签</span>
                </a>
              </div>
            

          </nav>

          
            <div class="feed-link motion-element">
              <a href="/blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
                
                  <span class="links-of-author-item">
                    <a href="https://github.com/dunwu" target="_blank" title="GitHub">
                      
                        <i class="fa fa-fw fa-github"></i>GitHub</a>
                  </span>
                
                  <span class="links-of-author-item">
                    <a href="mailto:forbreak@163.com" target="_blank" title="E-Mail">
                      
                        <i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                  </span>
                
            </div>
          

          
          

          
          

          

        </div>
      </section>

      
      <!--noindex-->
        <section class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
              
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#1-MyBatis-Generator-MBG-指南"><span class="nav-number">1.</span> <span class="nav-text">1. MyBatis Generator (MBG) 指南</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#1-配置详解"><span class="nav-number">1.1.</span> <span class="nav-text">1. 配置详解</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-1-文件头"><span class="nav-number">1.1.1.</span> <span class="nav-text">1.1. 文件头</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-2-根元素"><span class="nav-number">1.1.2.</span> <span class="nav-text">1.2. 根元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-3-properties-元素"><span class="nav-number">1.1.3.</span> <span class="nav-text">1.3. properties 元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-4-classPathEntry-元素"><span class="nav-number">1.1.4.</span> <span class="nav-text">1.4. classPathEntry 元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-5-context-元素"><span class="nav-number">1.1.5.</span> <span class="nav-text">1.5. context 元素</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-1-plugin-元素"><span class="nav-number">1.1.5.1.</span> <span class="nav-text">1.5.1. plugin 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-2-commentGenerator-元素"><span class="nav-number">1.1.5.2.</span> <span class="nav-text">1.5.2. commentGenerator 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-3-jdbcConnection-元素"><span class="nav-number">1.1.5.3.</span> <span class="nav-text">1.5.3. jdbcConnection 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-4-javaTypeResolver-元素"><span class="nav-number">1.1.5.4.</span> <span class="nav-text">1.5.4. javaTypeResolver 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-5-5-javaModelGenerator-元素"><span class="nav-number">1.1.5.5.</span> <span class="nav-text">1.5.5. javaModelGenerator 元素</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-6-sqlMapGenerator-元素"><span class="nav-number">1.1.6.</span> <span class="nav-text">1.6. sqlMapGenerator 元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-7-javaClientGenerator-元素"><span class="nav-number">1.1.7.</span> <span class="nav-text">1.7. javaClientGenerator 元素</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#1-8-table-元素"><span class="nav-number">1.1.8.</span> <span class="nav-text">1.8. table 元素</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-1-generatedKey-元素"><span class="nav-number">1.1.8.1.</span> <span class="nav-text">1.8.1. generatedKey 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-2-columnRenamingRule-元素"><span class="nav-number">1.1.8.2.</span> <span class="nav-text">1.8.2. columnRenamingRule 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-3-columnOverride-元素"><span class="nav-number">1.1.8.3.</span> <span class="nav-text">1.8.3. columnOverride 元素</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#1-8-4-ignoreColumn-元素"><span class="nav-number">1.1.8.4.</span> <span class="nav-text">1.8.4. ignoreColumn 元素</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#2-MyBatis-Generator-最佳实践"><span class="nav-number">1.2.</span> <span class="nav-text">2. MyBatis Generator 最佳实践</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-引用和引申"><span class="nav-number">1.3.</span> <span class="nav-text">3. 引用和引申</span></a></li></ol></li></ol></div>
            

          </div>
        </section>
      <!--/noindex-->
      

      

    </div>
  </aside>


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 &mdash; <span itemprop="copyrightYear">2019</span>
  <span class="with-love">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>

  
</div>









        







        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

  </div>

  

<script type="text/javascript">
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>









  


  











  
  
    <script type="text/javascript" src="/blog/lib/jquery/index.js?v=2.1.3"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/fancybox/source/jquery.fancybox.pack.js?v=2.1.5"></script>
  

  
  
    <script type="text/javascript" src="/blog/lib/canvas-nest/canvas-nest.min.js"></script>
  


  


  <script type="text/javascript" src="/blog/js/src/utils.js?v=5.1.4"></script>

  <script type="text/javascript" src="/blog/js/src/motion.js?v=5.1.4"></script>



  
  

  
  <script type="text/javascript" src="/blog/js/src/scrollspy.js?v=5.1.4"></script>
<script type="text/javascript" src="/blog/js/src/post-details.js?v=5.1.4"></script>



  


  <script type="text/javascript" src="/blog/js/src/bootstrap.js?v=5.1.4"></script>



  


  




	





  





  












  

  <script type="text/javascript">
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/blog/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url);
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x" /></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x" /></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === '') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  
  

  

  

  

</body>
</html>
