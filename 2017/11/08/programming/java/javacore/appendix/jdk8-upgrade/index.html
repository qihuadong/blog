<!DOCTYPE html>












  


<html class="theme-next muse use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">


























<link rel="stylesheet" href="/blog/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/blog/css/main.css?v=7.0.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/blog/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/blog/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/blog/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/blog/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/blog/',
    scheme: 'Muse',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"b2t":false,"scrollpercent":true,"onmobile":true,"dimmer":false},
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="JDK8 升级常见问题 JDK8 发布很久了，它提供了许多吸引人的新特性，能够提高编程效率。 如果是新的项目，使用 JDK8 当然是最好的选择。但是，对于一些老的项目，升级到 JDK8 则存在一些兼容性问题，是否升级需要酌情考虑。 近期，我在工作中遇到一个任务，将部门所有项目的 JDK 版本升级到 1.8 （老版本大多是 1.6）。在这个过程中，遇到一些问题点，并结合在网上看到的坑，在这里总结一下">
<meta name="keywords" content="javacore,升级">
<meta property="og:type" content="article">
<meta property="og:title" content="JDK8 升级常见问题">
<meta property="og:url" content="https://dunwu.github.io/2017/11/08/programming/java/javacore/appendix/jdk8-upgrade/index.html">
<meta property="og:site_name" content="张鹏的博客">
<meta property="og:description" content="JDK8 升级常见问题 JDK8 发布很久了，它提供了许多吸引人的新特性，能够提高编程效率。 如果是新的项目，使用 JDK8 当然是最好的选择。但是，对于一些老的项目，升级到 JDK8 则存在一些兼容性问题，是否升级需要酌情考虑。 近期，我在工作中遇到一个任务，将部门所有项目的 JDK 版本升级到 1.8 （老版本大多是 1.6）。在这个过程中，遇到一些问题点，并结合在网上看到的坑，在这里总结一下">
<meta property="og:locale" content="zh-CN">
<meta property="og:updated_time" content="2019-03-06T08:43:46.369Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="JDK8 升级常见问题">
<meta name="twitter:description" content="JDK8 升级常见问题 JDK8 发布很久了，它提供了许多吸引人的新特性，能够提高编程效率。 如果是新的项目，使用 JDK8 当然是最好的选择。但是，对于一些老的项目，升级到 JDK8 则存在一些兼容性问题，是否升级需要酌情考虑。 近期，我在工作中遇到一个任务，将部门所有项目的 JDK 版本升级到 1.8 （老版本大多是 1.6）。在这个过程中，遇到一些问题点，并结合在网上看到的坑，在这里总结一下">



  <link rel="alternate" href="/blog/atom.xml" title="张鹏的博客" type="application/atom+xml">




  <link rel="canonical" href="https://dunwu.github.io/2017/11/08/programming/java/javacore/appendix/jdk8-upgrade/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>JDK8 升级常见问题 | 张鹏的博客</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/blog/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">张鹏的博客</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">大道至简，知易行难</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home">

    
    
    
      
    

    

    <a href="/blog/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/blog/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/blog/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/blog/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br>分类</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/blog/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>
        
        
        
          
            
            
            
              
              

  
  
    
  
  <li class="menu-item menu-item-docs">

    
    
    
      
    

    

    <a href="/blog/docs/" rel="section"><i class="menu-item-icon fa fa-fw fa-book"></i> <br>docs</a>

  </li>


            
          
            
            
            
          
        

      
      
    </ul>
  

  
    

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  
    <div class="reading-progress-bar"></div>
  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://dunwu.github.io/blog/2017/11/08/programming/java/javacore/appendix/jdk8-upgrade/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Zhang Peng">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/blog/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="张鹏的博客">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">JDK8 升级常见问题<a href="https://github.com/dunwu/blog/blob/master/source/_posts/programming/java/javacore/appendix/jdk8-upgrade.md" class="post-edit-link" title="编辑" rel="noopener" target="_blank"><i class="fa fa-pencil"></i></a>

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">发表于</span>
              

              
                
              

              <time title="创建时间：2017-11-08 00:00:00" itemprop="dateCreated datePublished" datetime="2017-11-08T00:00:00+08:00">2017-11-08</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-03-06 16:43:46" itemprop="dateModified" datetime="2019-03-06T16:43:46+08:00">2019-03-06</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">分类于</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/blog/categories/javacore/" itemprop="url" rel="index"><span itemprop="name">javacore</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">4k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">阅读时长 &asymp;</span>
                
                <span title="阅读时长">4 分钟</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="JDK8-升级常见问题"><a href="#JDK8-升级常见问题" class="headerlink" title="JDK8 升级常见问题"></a>JDK8 升级常见问题</h1><blockquote>
<p>JDK8 发布很久了，它提供了许多吸引人的新特性，能够提高编程效率。</p>
<p>如果是新的项目，使用 JDK8 当然是最好的选择。但是，对于一些老的项目，升级到 JDK8 则存在一些兼容性问题，是否升级需要酌情考虑。</p>
<p>近期，我在工作中遇到一个任务，将部门所有项目的 JDK 版本升级到 1.8 （老版本大多是 1.6）。在这个过程中，遇到一些问题点，并结合在网上看到的坑，在这里总结一下。</p>
</blockquote>
<h2 id="FAQ"><a href="#FAQ" class="headerlink" title="FAQ"></a>FAQ</h2><h3 id="Intellij-中的-JDK-环境设置"><a href="#Intellij-中的-JDK-环境设置" class="headerlink" title="Intellij 中的 JDK 环境设置"></a>Intellij 中的 JDK 环境设置</h3><h4 id="Settings"><a href="#Settings" class="headerlink" title="Settings"></a>Settings</h4><p>点击 <strong>File &gt; Settings &gt; Java Compiler</strong></p>
<p>Project bytecode version 选择 1.8</p>
<p>点击 <strong>File &gt; Settings &gt; Build Tools &gt; Maven &gt; Importing</strong></p>
<p>选择 JDK for importer 为 1.8</p>
<h4 id="Projcet-Settings"><a href="#Projcet-Settings" class="headerlink" title="Projcet Settings"></a>Projcet Settings</h4><p><strong>Project SDK</strong> 选择 1.8</p>
<h4 id="Application"><a href="#Application" class="headerlink" title="Application"></a>Application</h4><p>如果 web 应用的启动方式为 Application ，需要修改 JRE</p>
<p>点击 <strong>Run/Debug Configurations &gt; Configuration</strong></p>
<p>选择 JRE 为 1.8</p>
<h3 id="Linux-环境修改"><a href="#Linux-环境修改" class="headerlink" title="Linux 环境修改"></a>Linux 环境修改</h3><h4 id="修改环境变量"><a href="#修改环境变量" class="headerlink" title="修改环境变量"></a>修改环境变量</h4><p>修改 <code>/etc/profile</code> 中的 <strong>JAVA_HOME</strong>，设置 为 jdk8 所在路径。</p>
<p>修改后，执行 <code>source /etc/profile</code> 生效。</p>
<p>编译、发布脚本中如果有 <code>export JAVA_HOME</code> ，需要注意，需要使用 jdk8 的路径。</p>
<h4 id="修改-maven"><a href="#修改-maven" class="headerlink" title="修改 maven"></a>修改 maven</h4><p>settings.xml 中 profile 的激活条件如果是 jdk，需要修改一下 jdk 版本</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">activation</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">jdk</span>&gt;</span>1.8<span class="tag">&lt;/<span class="name">jdk</span>&gt;</span> <span class="comment">&lt;!-- 修改为 1.8 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">activation</span>&gt;</span></span><br></pre></td></tr></table></figure>
<h4 id="修改-server"><a href="#修改-server" class="headerlink" title="修改 server"></a>修改 server</h4><p>修改 server 中的 javac 版本，以 resin 为例：</p>
<p>修改 resin 配置文件中的 javac 参数。</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">javac</span> <span class="attr">compiler</span>=<span class="string">"internal"</span> <span class="attr">args</span>=<span class="string">"-source 1.8"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<h3 id="sun-包缺失问题"><a href="#sun-包缺失问题" class="headerlink" title="sun.* 包缺失问题"></a>sun.* 包缺失问题</h3><p>JDK8 不再提供 <code>sun.*</code> 包供开发者使用，因为这些接口不是公共接口，不能保证在所有 Java 兼容的平台上工作。</p>
<p>使用了这些 API 的程序如果要升级到 JDK 1.8 需要寻求替代方案。</p>
<p>虽然，也可以自己导入包含 <code>sun.*</code> 接口 jar 包到 classpath 目录，但这不是一个好的做法。</p>
<p>需要详细了解为什么不要使用 <code>sun.*</code> ，可以参考官方文档：<a href="http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html" target="_blank" rel="noopener">Why Developers Should Not Write Programs That Call ‘sun’ Packages</a></p>
<h3 id="默认安全策略修改"><a href="#默认安全策略修改" class="headerlink" title="默认安全策略修改"></a>默认安全策略修改</h3><p>升级后估计有些小伙伴在使用不安全算法时可能会发生错误，so，支持不安全算法还是有必要的</p>
<p>找到$JAVA_HOME下 <code>jre/lib/security/java.security</code> ，将禁用的算法设置为空：<code>jdk.certpath.disabledAlgorithms=</code> 。</p>
<h3 id="JVM参数调整"><a href="#JVM参数调整" class="headerlink" title="JVM参数调整"></a>JVM参数调整</h3><p>在jdk8中，PermSize相关的参数已经不被使用：</p>
<figure class="highlight livecodeserver"><table><tr><td class="code"><pre><span class="line">-XX:MaxPermSize=size</span><br><span class="line"></span><br><span class="line">Sets <span class="keyword">the</span> maximum permanent generation <span class="literal">space</span> size (<span class="keyword">in</span> <span class="keyword">bytes</span>). This option was deprecated <span class="keyword">in</span> JDK <span class="number">8</span>, <span class="keyword">and</span> superseded <span class="keyword">by</span> <span class="keyword">the</span> -XX:MaxMetaspaceSize option.</span><br><span class="line"></span><br><span class="line">-XX:PermSize=size</span><br><span class="line"></span><br><span class="line">Sets <span class="keyword">the</span> <span class="literal">space</span> (<span class="keyword">in</span> <span class="keyword">bytes</span>) allocated <span class="built_in">to</span> <span class="keyword">the</span> permanent generation that triggers <span class="keyword">a</span> garbage collection <span class="keyword">if</span> <span class="keyword">it</span> is exceeded. This option was deprecated un JDK <span class="number">8</span>, <span class="keyword">and</span> superseded <span class="keyword">by</span> <span class="keyword">the</span> -XX:MetaspaceSize option.</span><br></pre></td></tr></table></figure>
<p>JDK8 中再也没有 <code>PermGen</code> 了。其中的某些部分，如被 intern 的字符串，在 JDK7 中已经移到了普通堆里。<strong>其余结构在 JDK8 中会被移到称作“Metaspace”的本机内存区中，该区域在默认情况下会自动生长，也会被垃圾回收。它有两个标记：MetaspaceSize 和 MaxMetaspaceSize。</strong></p>
<p>-XX:MetaspaceSize=size</p>
<blockquote>
<p>Sets the size of the allocated class metadata space that will trigger a garbage collection the first time it is exceeded. This threshold for a garbage collection is increased or decreased depending on the amount of metadata used. The default size depends on the platform.</p>
</blockquote>
<p>-XX:MaxMetaspaceSize=size</p>
<blockquote>
<p> Sets the maximum amount of native memory that can be allocated for class metadata. By default, the size is not limited.  The amount of metadata for an application depends on the application itself, other running applications, and the amount of memory available on the system.</p>
</blockquote>
<p>以下示例显示如何将类类元数据的上限设置为 256 MB：</p>
<p>XX:MaxMetaspaceSize=256m</p>
<h3 id="字节码问题"><a href="#字节码问题" class="headerlink" title="字节码问题"></a>字节码问题</h3><p>ASM 5.0 beta 开始支持 JDK8</p>
<p><strong>字节码错误</strong></p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">Caused by: java<span class="selector-class">.io</span><span class="selector-class">.IOException</span>: invalid constant type: <span class="number">15</span></span><br><span class="line">	at javassist<span class="selector-class">.bytecode</span><span class="selector-class">.ConstPool</span><span class="selector-class">.readOne</span>(ConstPool<span class="selector-class">.java</span>:<span class="number">1113</span>)</span><br></pre></td></tr></table></figure>
<ul>
<li>查找组件用到了 mvel，mvel 为了提高效率进行了字节码优化，正好碰上 JDK8 死穴，所以需要升级。</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.mvel<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>mvel2<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>2.2.7.Final<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>javassist</li>
</ul>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>org.javassist<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javassist<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.18.1-GA<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p><strong>注意</strong></p>
<p>有些部署工具不会删除旧版本 jar 包，所以可以尝试手动删除老版本 jar 包。</p>
</blockquote>
<p><a href="http://asm.ow2.org/history.html" target="_blank" rel="noopener">http://asm.ow2.org/history.html</a></p>
<h3 id="Java连接redis启动报错Error-redis-clients-jedis-HostAndPort-cant-resolve-localhost-address"><a href="#Java连接redis启动报错Error-redis-clients-jedis-HostAndPort-cant-resolve-localhost-address" class="headerlink" title="Java连接redis启动报错Error redis clients jedis HostAndPort cant resolve localhost address"></a>Java连接redis启动报错Error redis clients jedis HostAndPort cant resolve localhost address</h3><p>错误环境:<br>本地window开发环境没有问题。上到Linux环境,启动出现问题。<br>错误信息:<br>Error redis clients jedis HostAndPort cant resolve localhost address</p>
<p>解决办法:</p>
<ol>
<li>查看Linux系统的主机名</li>
</ol>
<figure class="highlight cpp"><table><tr><td class="code"><pre><span class="line"><span class="meta"># hostname</span></span><br><span class="line"><span class="keyword">template</span></span><br></pre></td></tr></table></figure>
<ol start="2">
<li>查看/etc/hosts文件中是否有127.0.0.1对应主机名，如果没有则添加</li>
</ol>
<h3 id="Resin-容器指定-JDK-1-8"><a href="#Resin-容器指定-JDK-1-8" class="headerlink" title="Resin 容器指定 JDK 1.8"></a>Resin 容器指定 JDK 1.8</h3><p>如果 resin 容器原来版本低于 JDK1.8，运行 JDK 1.8 编译的 web app 时，可能会提示错误：</p>
<figure class="highlight stylus"><table><tr><td class="code"><pre><span class="line">java<span class="selector-class">.lang</span><span class="selector-class">.UnsupportedClassVersionError</span>: PR/Sort : Unsupported major<span class="selector-class">.minor</span> version <span class="number">52.0</span></span><br></pre></td></tr></table></figure>
<p>解决方法就是，使用 JDK 1.8 要重新编译一下。然后，我在部署时出现过编译后仍报错的情况，重启一下服务器后，问题解决，不知是什么原因。</p>
<figure class="highlight gauss"><table><tr><td class="code"><pre><span class="line">./configure --prefix=/usr/<span class="keyword">local</span>/resin  --with-java=/usr/<span class="keyword">local</span>/jdk1<span class="number">.8</span><span class="number">.0</span>_121</span><br><span class="line"><span class="built_in">make</span> &amp; <span class="built_in">make</span> install</span><br></pre></td></tr></table></figure>
<h2 id="资料"><a href="#资料" class="headerlink" title="资料"></a>资料</h2><ul>
<li><a href="http://www.oracle.com/technetwork/java/javase/8-compatibility-guide-2156366.html" target="_blank" rel="noopener">Compatibility Guide for JDK 8</a></li>
<li><a href="https://yq.aliyun.com/articles/236" target="_blank" rel="noopener">Compatibility Guide for JDK 8 中文翻译</a></li>
<li><a href="http://www.oracle.com/technetwork/java/faq-sun-packages-142232.html" target="_blank" rel="noopener">Why Developers Should Not Write Programs That Call ‘sun’ Packages</a></li>
</ul>

      
    </div>

    
      


    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      
        <div class="post-tags">
          
            <a href="/blog/tags/javacore/" rel="tag"># javacore</a>
          
            <a href="/blog/tags/升级/" rel="tag"># 升级</a>
          
        </div>
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/blog/2017/11/08/programming/java/javaweb/javaee/jsp/jsp-implicit-objects/" rel="next" title="JSP 隐式对象">
                <i class="fa fa-chevron-left"></i> JSP 隐式对象
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/blog/2017/11/08/programming/java/javaweb/javaee/session/session/" rel="prev" title="JavaEE Session">
                JavaEE Session <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            文章目录
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            站点概览
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/blog/images/avatar.gif" alt="Zhang Peng">
            
              <p class="site-author-name" itemprop="name">Zhang Peng</p>
              <p class="site-description motion-element" itemprop="description"></p>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/blog/archives/">
                
                    <span class="site-state-item-count">381</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  <a href="/blog/categories/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">14</span>
                    <span class="site-state-item-name">分类</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  <a href="/blog/tags/index.html">
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">76</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          
            <div class="feed-link motion-element">
              <a href="/blog/atom.xml" rel="alternate">
                <i class="fa fa-rss"></i>
                RSS
              </a>
            </div>
          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/dunwu" title="GitHub &rarr; https://github.com/dunwu" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="mailto:forbreak@163.com" title="E-Mail &rarr; mailto:forbreak@163.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i>E-Mail</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#JDK8-升级常见问题"><span class="nav-text">JDK8 升级常见问题</span></a><ol class="nav-child"><li class="nav-item nav-level-2"><a class="nav-link" href="#FAQ"><span class="nav-text">FAQ</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#Intellij-中的-JDK-环境设置"><span class="nav-text">Intellij 中的 JDK 环境设置</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Settings"><span class="nav-text">Settings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Projcet-Settings"><span class="nav-text">Projcet Settings</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Application"><span class="nav-text">Application</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Linux-环境修改"><span class="nav-text">Linux 环境修改</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#修改环境变量"><span class="nav-text">修改环境变量</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改-maven"><span class="nav-text">修改 maven</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#修改-server"><span class="nav-text">修改 server</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#sun-包缺失问题"><span class="nav-text">sun.* 包缺失问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#默认安全策略修改"><span class="nav-text">默认安全策略修改</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#JVM参数调整"><span class="nav-text">JVM参数调整</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#字节码问题"><span class="nav-text">字节码问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Java连接redis启动报错Error-redis-clients-jedis-HostAndPort-cant-resolve-localhost-address"><span class="nav-text">Java连接redis启动报错Error redis clients jedis HostAndPort cant resolve localhost address</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Resin-容器指定-JDK-1-8"><span class="nav-text">Resin 容器指定 JDK 1.8</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#资料"><span class="nav-text">资料</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; 2015 – <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-paper-plane"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Zhang Peng</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="站点总字数">2.1m</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="站点阅读时长">31:18</span>
  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
          <span id="scrollpercent"><span>0</span>%</span>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/blog/lib/canvas-nest/canvas-nest.min.js"></script>











  



  
  <script src="/blog/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/blog/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/blog/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>

  
  <script src="/blog/lib/reading_progress/reading_progress.js"></script>


  


  <script src="/blog/js/src/utils.js?v=7.0.1"></script>

  <script src="/blog/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/blog/js/src/schemes/muse.js?v=7.0.1"></script>



  
  <script src="/blog/js/src/scrollspy.js?v=7.0.1"></script>
<script src="/blog/js/src/post-details.js?v=7.0.1"></script>



  


  <script src="/blog/js/src/bootstrap.js?v=7.0.1"></script>


  
  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  
  <style>
    .copy-btn {
      display: inline-block;
      padding: 6px 12px;
      font-size: 13px;
      font-weight: 700;
      line-height: 20px;
      color: #333;
      white-space: nowrap;
      vertical-align: middle;
      cursor: pointer;
      
        background-color: #eee;
        background-image: linear-gradient(#fcfcfc, #eee);
        border: 1px solid #d5d5d5;
        border-radius: 3px;
      
      user-select: none;
      outline: 0;
    }

    .highlight-wrap .copy-btn {
      transition: opacity .3s ease-in-out;
      opacity: 0;
      padding: 2px 6px;
      position: absolute;
      
        right: 4px;
        top: 8px;
      
    }

    .highlight-wrap:hover .copy-btn,
    .highlight-wrap .copy-btn:focus {
      opacity: 1;
    }

    .highlight-wrap {
      position: relative;
    }
  </style>
  <script>
    $('.highlight').each(function(i, e) {
      var $wrap = $('<div>').addClass('highlight-wrap');
      $(e).after($wrap);
      $wrap.append($('<button>').addClass('copy-btn').append('复制').on('click', function(e) {
        var code = $(this).parent().find('.code').find('.line').map(function(i, e) {
          return $(e).text();
        }).toArray().join('\n');
        var ta = document.createElement('textarea');
        var yPosition = window.pageYOffset || document.documentElement.scrollTop;
        ta.style.top = yPosition + 'px'; // Prevent page scroll
        ta.style.position = 'absolute';
        ta.style.opacity = '0';
        ta.readOnly = true;
        ta.value = code;
        document.body.appendChild(ta);
        ta.select();
        ta.setSelectionRange(0, code.length);
        ta.readOnly = false;
        var result = document.execCommand('copy');
        
          if (result) $(this).text('复制成功');
          else $(this).text('复制失败');
        
        ta.blur(); // For iOS
        $(this).blur();
      })).on('mouseleave', function(e) {
        var $b = $(this).find('.copy-btn');
        setTimeout(function() {
          $b.text('复制');
        }, 300);
      }).append(e);
    })
  </script>


</body>
</html>
